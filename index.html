<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>reveal.js</title>

  <link rel="stylesheet" href="dist/reset.css" />
  <link rel="stylesheet" href="dist/reveal.css" />
  <link rel="stylesheet" href="dist/theme/black.css" />

  <link rel="stylesheet" href="lib/css/monokai.css" />
  <link rel="stylesheet" href="neucha/fonts.css" />
  <link rel="stylesheet" href="anonymous_pro/fonts.css" />
  <link rel="stylesheet" href="css/custom.css" />

  <!-- Theme used for syntax highlighted code -->
  <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section>
<h1>Дата-ориентированное программирование</h1>
          <p>Алексей Золотых</p>
        </section>
        <section>
          <img src="img/logo.svg" alt="МойОфис">
        </section>
        <section>
          <img src="img/header.svg" alt="HolyJS">
        </section>
      <section data-auto-animate>
        <p>
          Что вас ждёт?
        </p>
      </section>
        <section data-auto-animate>
          <p>
            Что вас ждёт?
          </p>
          <ul>
            <li>Еще одна парадигма программирования</li>
          </ul>
        </section>
        <section data-auto-animate>
          <p>
            Что вас ждёт?
          </p>
          <ul>
            <li>Еще одна парадигма программирования</li>
            <li>Много личного мнения</li>
          </ul>
        </section>
        <section data-auto-animate>
          <p>
            Что вас ждёт?
          </p>
          <ul>
            <li>Еще одна парадигма программирования</li>
            <li>Много личного мнения</li>
            <li>Много кода</li>
          </ul>
        </section>
      <section data-auto-animate>
        <h3>
          Парадигмы программирования
        </h3>
      </section>
      <section data-auto-animate>
        <h3>
          Парадигмы программирования
        </h3>
        <ul>
          <li>Объектно-ориентированная</li>
          <li class="fragment">Функциональная</li>
          <li class="fragment">Структурная</li>
          <li class="fragment">Аспектно-ориентированная</li>
          <li class="fragment">Автоматная</li>
          <li class="fragment">Компонентно-ориентированная</li>
        </ul>
      </section>
      <section data-auto-animate>
        <h3>
          Парадигмы программирования
        </h3>
        <ul>
          <li>Объектно-ориентированная</li>
          <li>Функциональная</li>
          <li style="color:red">Структурная</li>
          <li>Аспектно-ориентированная</li>
          <li>Автоматная</li>
          <li>Компонентно-ориентированная</li>
        </ul>
      </section>
      <section data-auto-animate>
        <h3>
          Парадигмы программирования
        </h3>
        <ul>
          <li style="color:green">Объектно-ориентированная</li>
          <li style="color: green">Функциональная</li>
          <li style="color:red">Структурная</li>
          <li>Аспектно-ориентированная</li>
          <li>Автоматная</li>
          <li>Компонентно-ориентированная</li>
        </ul>
      </section>
      <section data-auto-animate>
        <h3>
          Парадигмы программирования
        </h3>
        <ul>
          <li style="color:green">Объектно-ориентированная</li>
          <li style="color: green">Функциональная</li>
          <li style="color:red">Структурная</li>
          <li>Аспектно-ориентированная</li>
          <li>Автоматная</li>
          <li>Компонентно-ориентированная</li>
          <li>...</li>
        </ul>
      </section>
      <section data-auto-animate>
        <h3>
          Парадигмы программирования
        </h3>
        <ul>
          <li style="color:green">Объектно-ориентированная</li>
          <li style="color: green">Функциональная</li>
          <li style="color:red">Структурная</li>
          <li>Аспектно-ориентированная</li>
          <li>Автоматная</li>
          <li>Компонентно-ориентированная</li>
          <li>...</li>
          <li>Дата-ориентированная</li>
        </ul>
      </section>
      <section data-auto-animate>
        <h2>Clojure</h2>
        <p>2007 год, Рич Хикки</p>
        <p class="fragment">
          Cовременный Лисп для функционального программирования с интеграцией в Java-платформу, спроектированный для
          поддержки параллелизма
        </p>
      </section>
      <section data-auto-animate="">
        <h2>Clojure</h2>
        <p>2007 год, Рич Хикки</p>
        <p>
          Cовременный <mark>Лисп</mark> для функционального программирования с интеграцией в Java-платформу,
          спроектированный для
          поддержки параллелизма
        </p>
      </section>
      <section data-auto-animate>
        <h2>Clojure</h2>
        <p>2007 год, Рич Хикки</p>
        <p>
          Cовременный Лисп для <mark>функционального</mark> программирования с интеграцией в Java-платформу,
          спроектированный для
          поддержки параллелизма
        </p>
      </section>
      <section data-auto-animate>
        <h2>Clojure</h2>
        <p>2007 год, Рич Хикки</p>
        <p>
          Cовременный Лисп для функционального программирования с интеграцией в <mark>Java-платформу</mark>,
          спроектированный для
          поддержки параллелизма
        </p>
      </section>
      <section data-auto-animate>
        <h2>Clojure</h2>
        <p>2007 год, Рич Хикки</p>
        <p>
          Cовременный Лисп для функционального программирования с интеграцией в Java-платформу,
          спроектированный для
          поддержки <mark>параллелизма</mark>
        </p>
      </section>
      <section>
        <p>Причем здесь HolyJS?!</p>
        <small>
          <pre style="margin: 0 auto; width: 100%"><code data-trim data-noescape>
              Уважаемые организаторы HolyJS!

              Пришел на доклад, ожидая JavaScript,
              а попал на Clojure!

              Вместо знакомого кода меня встретил
              скобочный ад, где круглых скобок больше,
              чем посетителей.

              Чувствовал себя, как если бы меня позвали
              на пиццу, а вручили древнегреческий словарь.

              Пожалуйста, отмечайте такие доклады
              красным флажком, чтобы не шокировать
              ничего не подозревающих JS-разработчиков!

              С уважением, Любитель
              {JavaScript, async/await и скобок в умеренных дозах}
            </code></pre>
        </small>
      </section>
      <section>В докладе не будет ни строчки кода на Clojure</section>

        <section>
          <h2>Кто автор?</h2>
<b>SOLID</b> (сокр. от англ. single responsibility, open–closed, Liskov substitution, interface segregation и dependency inversion)
        </section>
      <section>
        <p>Доклад &mdash; попытка перенять опыт</p>
        <img style="max-width: 30vw;" src="./img/martin.png" alt="">
      </section>
      <section>
        <p>&laquo;Дата-ориентированное программирование&raquo; <br>Йонатан Шарвит</p>
        <img style="max-height: 30vh" src="img/dop-book.png" alt="">
      </section>
      <section>
        <p>Дата-ориентированное программирование = ДОП</p>
      </section>
      <section>
        Можно одновременно использовать ООП, ФП и ДОП!
      </section>
      <section>
        <h2>Принципы ДОП</h2>
        <ol>
          <li>Отделение кода от данных</li>
          <li>Стандартные структуры данных</li>
          <li>Неизменяемыме данные</li>
          <li>Отделение схемы от представления</li>
        </ol>
      </section>
      <section>
        <h2>1. Отделяем код от данных</h2>
      </section>
      <section>
        <h3>Можно написать так...</h3>
          <pre class="fragment"><code data-trim data-line-numbers="1-13|3-5|7-9|10-12|17-18|1-18">
class Author {
  constructor(firstName, lastName, books) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.books = books;
  }
  fullName() {
    return this.firstName + " " + this.lastName;
  }
  isProlific() {
    return this.books > 100;
  }
}



var obj = createAuthorObject("Isaac", "Asimov", 500);
obj.fullName();
          </code></pre>
      </section>
        <section>
          <h3>Разделяем данные и код</h3>
<pre><code data-trim data-line-numbers="1-25|1-7|9-13|15-19|24-25|1-25">
class AuthorData {
  constructor(firstName, lastName, books) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.books = books;
  }
}

class NameCalculation {
  static fullName(data) {
    return data.firstName + " " + data.lastName;
  }
}

class AuthorRating {
  static isProlific (data) {
    return data.books > 100;
  }
}




var data = new AuthorData("Isaac", "Asimov", 500);
NameCalculation.fullName(data);
          </code></pre>
        </section>
      <section>
        <h3>Или так...</h3>
          <pre><code data-trim data-line-numbers="1-10|4|7|1-10">
function createAuthorObject(firstName, lastName, books) {
  return {
    fullName: function() {
      return firstName + " " + lastName;
    },
    isProlific: function () {
      return books > 100;
    }
  };
}
          </code></pre>
        </section>
        <section>
          <h3>Изменения в ФП стиле</h3>
<pre><code data-trim data-line-numbers="1-15|1-7|9-11|13-15|20-22|1-22">
function createAuthorData(firstName, lastName, books) {
  return {
    firstName: firstName,
    lastName: lastName,
    books: books
  };
}

function fullName(data) {
  return data.firstName + " " + data.lastName;
}

function isProlific (data) {
  return data.books > 100;
}




var data = createAuthorData("Isaac", "Asimov", 500);
fullName(data);
          </code></pre>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
          <ul>
            <li>Код может быть переиспользован в разных контекстах</li>
          </ul>
        </section>
        <section>
          <h3>Переиспользование кода в ООП </h3>
          <pre><code data-trim data-line-numbers="1-13|7-9">
class Author {
  constructor(firstName, lastName, books) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.books = books;
  }
  fullName() {
    return this.firstName + " " + this.lastName;
  }
  isProlific() {
    return this.books > 100;
  }
}
          </code></pre>
        </section>
        <section>
          <h3>Переиспользование кода в ООП
            <br>
            <small>наследование</small>
          </h3>
          <pre><code data-trim data-line-numbers="1-22|1-9|10-15|16-21|1-22">
class Person {
  constructor(firstName, lastName){
    this.firstName = firstName;
    this.lastName = lastName
  }
  fullName() {
    return this.firstName + " " + this.lastName;
  }
}
class Author extends Person {
  constructor(firstName, lastName, books) {
    super(firstName, lastName)
    ...
  }
}
class User extends Person {
  constructor(firstName, lastName, books) {
    super(firstName, lastName)
    ...
  }
}
          </code></pre>
        </section>
        <section>
          <h3>Переиспользование кода в ООП
            <br>
            <small>композиция</small>
          </h3>
          <pre><code data-trim data-line-numbers="1-18|1-9|6-8|10-14|17-18|1-18">
class Person {
  constructor(firstName, lastName){
    this.firstName = firstName;
    this.lastName = lastName
  }
  fullName() {
    return this.firstName + " " + this.lastName;
  }
}
class Author {
  constructor(person) {
    this.person = person
    ...
  }
}

var person = new Person('Isaac', ' Asimov')
var author = new Author(person)
          </code></pre>
        </section>
        <section>
          <h3>В DOP</h3>
          <pre><code data-trim data-line-numbers="1-18|1-3|5-7|9-11|14-18|15,18|1-18">
function createAuthorData(firstName, lastName, books) {
  return {firstName: firstName, lastName: lastName, books: books};
}

function createUserData(firstName, lastName, email) {
  return {firstName: firstName, lastName: lastName, email: email};
}

function fullName(data) {
  return data.firstName + " " + data.lastName;
}


var authorData = createAuthorData("Isaac", "Asimov", 500);
fullName(authorData); // Isaac Asimov

var userData = createUserData("John", "Doe", "john@doe.com");
fullName(userData); // John Doe
          </code></pre>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
          <ul>
            <li>Код может быть переиспользован в разных контекстах</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
          <ul>
            <li>Код может быть переиспользован в разных контекстах</li>
            <li>Тестирование без бойлерплейта</li>
          </ul>
        </section>
        <section>
          <h3>Тестирование</h3>
          <pre class="fragment" data-fragment-index="0"><code class="js" data-trim>
const author =  createAuthorObject("Isaac", "Asimov", 500);

assert(author.fullName() === "Isaac Asimov")
          </code></pre>
          <p class="fragment" data-fragment-index="1">vs</p>
<pre class="fragment" data-fragment-index="1"><code class="js" data-trim>
const author =  {
  firstName: "Isaac",
  lastName: "Asimov"
};

assert(fullName(author) === "Isaac Asimov")
</code></pre>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
          <ul>
            <li>Код может быть переиспользован в разных контекстах</li>
            <li>Тестирование без бойлерплейта</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
          <ul>
            <li>Код может быть переиспользован в разных контекстах</li>
            <li>Тестирование без бойлерплейта</li>
            <li>Кодовая база менее сложная</li>
          </ul>
        </section>
        <section>
          <p>Про легкость понимания кода</p>
          <a href="http://mng.bz/enzq">http://mng.bz/enzq</a>
          <p class="fragment">Вспомните про композицию vs наследование</p>
        </section>
        <section>
          <img src="img/complex-class-relation.png" alt="">
        </section>
        <section>
          <img src="img/data-code-relation.png" alt="">
        </section>
        <section data-auto-animate>
          <h3>Минусы</h3>
        </section>
        <section data-auto-animate>
          <h3>Минусы</h3>
          <ul>
            <li>Потерялась инкапсуляция</li>
          </ul>
        </section>
        <section data-transition="slide none">
          <p>Сокрытие и контроль</p>
          <pre><code data-trim data-line-numbers>
class Author {
  ...
  constructor(firstName, lastName, books) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.books = books;
  }
  fullName() {
    return this.firstName + " " + this.lastName;
  }
  isProlific() {
    return this.books > 100;
  }
}
          </code></pre>
        </section>
        <section data-transition="none">
          <p>Сокрытие и контроль</p>
          <pre><code data-trim data-line-numbers>
class Author {
  ...
  constructor(firstName, lastName, books) {
    this.#firstName = firstName;
    this.#lastName = lastName;
    this.#books = books;
  }
  fullName() {
    return this.#firstName + " " + this.#lastName;
  }
  isProlific() {
    return this.#books > 100;
  }
}
          </code></pre>
        </section>
        <section data-auto-animate>
          <h3>Минусы</h3>
          <ul>
            <li>Потерялась инкапсуляция</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h3>Минусы</h3>
          <ul>
            <li>Потерялась инкапсуляция</li>
            <li>Потерялась модульность</li>
          </ul>
        </section>
        <section>
          <img src="img/autocomplete.png" alt="autocomplete in IDE">
        </section>
        <section data-auto-animate>
          <h3>Минусы</h3>
          <ul>
            <li>Потерялась инкапсуляция</li>
            <li>Потерялась модульность</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h3>Минусы</h3>
          <ul>
            <li>Потерялась инкапсуляция</li>
            <li>Потерялась модульность</li>
            <li>Больше сущностей</li>
          </ul>
        </section>
        <section>
          <img src="img/data-code-relation.png" alt="">
        </section>
        <section>
          <h2>2. Стандартные структуры данных</h2>
        </section>
        <section>
          <blockquote cite="http://en.wikipedia.org/wiki/Epigrams_on_Programming">
          It is better to have 100 functions operate on one data structure than to have 10 functions operate on 10 data structures.
              <p>&mdash; Alan Perlis', <cite>Epigrams on Programming</cite></p>
            </p>

          </blockquote>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
          <ul>
            <li>Сериализация из коробки</li>
          </ul>
        </section>
        <section>
          <h3>Сериализация из коробки</h3>
          <pre><code data-trim>
const data = createAuthorData("Isaac", "Asimov", 500);
JSON.stringify(data);
          </code></pre>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
          <ul>
            <li>Сериализация из коробки</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
          <ul>
            <li>Сериализация из коробки</li>
            <li>Много всего уже написано</li>
          </ul>
        </section>
        <section>
          <h3>Многое из коробки</h3>
          <pre><code class="js" data-trim data-line-numbers="1-6|4|1-6">
const data = createAuthorData("Isaac", "Asimov", 500);

const dataWithoutBooks =
            _.pick(data, ["firstName", "lastName"]);

JSON.stringify(dataWithoutBooks);
          </code></pre>
          <p class="fragment">_.get, _.set, _.filter</p>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
          <ul>
            <li>Сериализация из коробки</li>
            <li>Много всего уже написано</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h3>Плюсы</h3>
          <ul>
            <li>Сериализация из коробки</li>
            <li>Много всего уже написано</li>
            <li>Станартные паттерны</li>
          </ul>
        </section>
        <section>
          <h2>Классика OOP</h2>
          <p>Адаптер адаптером погоняет</p>
          <img src="img/standart.webp" alt="">
        </section>
        <section>
          <h2>До</h2>
<pre><code data-trim>
function removeAuthorDuplicates(book) {
  const authors = _.get(book, "authors");
  const uniqAuthors = _.uniq(authors);
  return _.set(book,"authors", uniqAuthors);
}
</code></pre>
        </section>
        <section>
          <h2>После</h2>
          <pre><code data-trim>
function update(map, path, fun) {
  var currentValue = _.get(map, path);
  var nextValue = fun(currentValue);
  return _.set(map, path, nextValue);
}
          </code></pre>
          <pre class="fragment"><code data-trim>
function removeAuthorDuplicates(book) {
         return update(book, "authors", _.uniq);
}
          </code></pre>
        </section>
        <section data-auto-animate>
          <h3>Минусы</h3>
          <ul>
            <li>Нет схемы</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h3>Минусы</h3>
          <ul>
            <li>Нет схемы</li>
            <li>Нет рантайм проверок</li>
          </ul>
        </section>
        <section>
          <h2>3. Неизменяемые данные</h2>
        </section>
        <section data-auto-animate>
          <h2>Плюсы</h2>
        </section>
        <section data-auto-animate>
          <h2>Плюсы</h2>
          <ul>
            <li>Уверенность в данных</li>
          </ul>
        </section>
        <section>
          <h2>Данные в JS меняются неожиданно</h2>
          <pre><code data-trim>
const myData = {num: 42};
const yourData = myData;

yourData.num = yourData.num + 1;
console.log(myData.num); // 43
          </code></pre>
        </section>
        <section>
          <pre><code data-trim>
function changeValue(obj, k, v) {
  const res = Object.assign({}, obj);
  res[k] = v;
  return res;
}

const myData = {num: 42};
const yourData = changeValue(myData, "num", myData.num + 1);
console.log(myData.num); // 42
          </code></pre>
        </section>
        <section data-auto-animate>
          <h2>Плюсы</h2>
          <ul>
            <li>Уверенность в данных</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h2>Плюсы</h2>
          <ul>
            <li>Уверенность в данных</li>
            <li>Предсказуемость кода</li>
          </ul>
        </section>
        <section>
          <h2>Данные могут меняться непредсказуемо</h2>
          <pre><code data-trim>
const myData = {num: 42};

setTimeout(function (data){
  console.log(data.num); // 0
}, 1000, myData);

myData.num = 0;
          </code></pre>
        </section>
        <section data-auto-animate>
          <h2>Плюсы</h2>
          <ul>
            <li>Уверенность в данных</li>
            <li>Предсказуемость кода</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h2>Плюсы</h2>
          <ul>
            <li>Уверенность в данных</li>
            <li>Предсказуемость кода</li>
            <li>Быстрые проверки</li>
          </ul>
        </section>
        <section>
          <h2>=== vs _.equal</h2>
        </section>
        <section data-auto-animate>
          <h2>Минусы</h2>
          <ul>
            <li>Нужна библиотека</li>
            <li>Уменьшение перформанса</li>
          </ul>
        </section>
        <section>
          <p>Список библиотек</p>
          <ul>
            <li><a href="https://github.com/lodash/lodash/wiki/fp-guide">Lodash/fp (deprecated)</a></li>
            <li><a href="https://ramdajs.com/docs/">Ramda</a></li>
            <li><a href="https://immerjs.github.io/immer/">Immer</a></li>
            <li><a href="https://immutable-js.com/">Immutable</a></li>
          </ul>
        </section>
        <section>
          <h2>4.Отделение схемы от представления</h2>
        </section>
        <section>
          <h2>JSON Schema</h2>
          <pre><code class="js" data-trim>
const addAuthorRequestSchema = {
  "type": "object", // (1)
  "required": ["firstName", "lastName"], // (2)
  "properties": {
    "firstName": {"type": "string"}, // (3)
    "lastName": {"type": "string"}, // (4)
    "books": {"type": "integer"} // (5)
  }
};
          </code></pre>
        </section>
        <section>
          <pre><code data-trim class="js">
var validAuthorData = {
  firstName: "Isaac",
  lastName: "Asimov",
  books: 500
};

ajv.validate(addAuthorRequestSchema,
             validAuthorData);
          </code></pre>
        </section>
        <section data-auto-animate>
          <h2>Плюсы</h2>
          <ul>
            <li>Гибкая валидация</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h2>Плюсы</h2>
          <ul>
            <li>Гибкая валидация</li>
            <li>Сложная валидация</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h2>Плюсы</h2>
          <ul>
            <li>Гибкая валидация</li>
            <li>Сложная валидация</li>
            <li>Генерация схем и данных</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h2>Плюсы</h2>
          <ul>
            <li>Гибкая валидация</li>
            <li>Сложная валидация</li>
            <li>Генерация схем и данных</li>
            <li>OpenAPI</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h2>Минусы</h2>
          <ul>
            <li>Перформанс</li>
            <li>Сложно связывать данные и схему</li>
          </ul>
        </section>
        <section>
          <p>Несколько слов про SOLID</p>
        </section>
        <section data-transition="slide none">
          <pre><code data-trim>
class Author {
  ...
  fullName() {
    return this.firstName + " " + this.lastName;
  }
}
          </code></pre>
        </section>
        <section data-transition="slide none">
          <pre><code data-trim>
  fullName({firstName, lastName}) {
    return firstName + " " + lastName;
  }
          </code></pre>
        </section>
        <section>
          <ul>
            <li>S &mdash; функция идеальный SRP. Валиадция отдельно</li>
            <li>?</li>
            <li>L &mdash;  нет иерархии, нет проблемы</li>
            <li>I &mdash; передаем то, что нужно</li>
            <li>D &mdash; не нужен DI, легко просто зависить от абстракций</li>
          </ul>
        </section>
        <section>
          <h2>Что c буквой O?!</h2>
          <p>Open–closed principle</p>
        </section>
        <section>
          <h2>Полиморфизм</h2>
        </section>
        <section>
          <p>Классический пример</p>
          <pre style="font-size: 0.3em"><code class="js" data-trim data-line-numbers>
interface IAnimal {
    public void greet();
}
class Dog implements IAnimal {
    private String name;
    public void greet() {
        System.out.println("Woof woof! My name is " + animal.name);
    }
}
class Cat implements IAnimal {
    private String name;
    public void greet() {
        System.out.println("Meow! I am " + animal.name);
    }
}
class Cow implements IAnimal {
    private String name;
    public void greet() {
        System.out.println("Moo! Call me " + animal.name);
    }
}
          </code></pre>
        </section>
        <section>
          <h2>В мире DOP и JS</h2>
          <pre><code class="js" data-trim>
function greet(animal) {
  switch (animal.type) {
    case "dog":
      console.log("Woof Woof! My name is: " + animal.name);
      break;
    case "cat":
      console.log("Meow! I am: " + animal.name);
      break;
    case "cow":
      console.log("Moo! Call me " + animal.name);
      break;
  };
}
          </code></pre>
        </section>
        <section>
          <pre style="font-size: 0.38em;"><code class="js" data-trim data-line-numbers="1-22|1-9|10-22">
function greetDog(animal) {
  console.log("Woof Woof! My name is: " + animal.name);
}
function greetCat(animal) {
  console.log("Meow! I am: " + animal.name);
}
function greetCow(animal) {
  console.log("Moo! Call me " + animal.name);
}
function greet(animal) {
  switch (animal.type) {
    case "dog":
      greetDog(animal);
      break;
    case "cat":
      greetCat(animal);
      break;
    case "cow":
      greetCow(animal);
      break;
  };
}
          </code></pre>
        </section>
        <section>
          <img src="img/multimethod-animal.png" alt="multimethod on animal example">
        </section>
        <section>
          <h2>Библиотека для мультиметода</h2>
          <a href="https://github.com/caderek/arrows/tree/master/packages/multimethod">arrows/multimethod</a>
        </section>
        <section>
          <h2>Простой случай</h2>
          <pre><code data-trim class="js" data-line-numbers="1-17|1|3-7|9-13|16-17">
let greet = multi(animal =&gt; animal.type);

// dog
function greetDog(animal) {
  console.log("Woof woof! My name is " + animal.name);
}
greet = method("dog", greetDog)(greet);

// cat
function greetCat(animal) {
  console.log("Meow! I am " + animal.name);
}
greet = method("cat", greetCat)(greet);


greet({type: "dog", name: "Fido"});
greet({type: "cat", name: "Tom"});
          </code></pre>
        </section>
        <section>
          <h2>Множественный диспатч</h2>
          <pre style="font-size: 0.5em;"><code class="js" data-trim data-line-numbers="1-7|1-2|4-6|7|9">
let greetLang = multi((animal, language)
            =&gt; [animal.type, language.type]);

function greetLangDogEn(animal, language) {
  //...
}
greetLang = method([&quot;dog&quot;, &quot;en&quot;], greetLangDogEn)(greetLang);

greetLang(myDog, french); // "Ouaf Ouaf! Mon nom est Fido et je parle Français"
          </code></pre>
        </section>
        <section>
          <h2>Динамический диспатч</h2>
          <pre><code class="js" data-trim>
let dysGreet = multi(
            animal =&gt; [animal.type, animal.name.length &gt; 5]);

function dysGreetDogShort(animal) {
  console.log(&quot;Woof woof! My name is &quot; + animal.name);
}


dysGreet = method([&quot;dog&quot;, false], dysGreetDogShort)(dysGreet);
          </code></pre>
        </section>
        <section>
          <h2>Про перформанс</h2>
          <p>Data-oriented design и мономорфизм</p>
        </section>
        <section data-auto-animate>
          <h1>Выводы</h1>
        </section>
        <section data-auto-animate>
          <h1>Выводы</h1>
          <ul>
            <li>DOP может улучшить ваш код</li>
            <li>DOP может сделать код хуже</li>
            <li>DOP легко комбинируется c OOP, FP etc</li>
            <li>Учить новое полезно</li>
          </ul>
        </section>
        <section>
          <h2>Еще раз про Принципы ДОП</h2>
          <ol>
            <li>Отделение кода от данных</li>
            <li>Стандартные структуры данных</li>
            <li>Неизменяемыме данные</li>
            <li>Отделение схемы от представления</li>
          </ol>
        </section>
        <section>
          <h2>Спасибо!</h2>
        </section>
    </div>
  </div>
  <script src="dist/reveal.js"></script>
  <script src="plugin/notes/notes.js"></script>
  <script src="plugin/markdown/markdown.js"></script>
  <script src="plugin/highlight/highlight.js"></script>
  <script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
      hash: true,

      // Learn about plugins: https://revealjs.com/plugins/
      plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
    });
  </script>
</body>

</html>
